---
layout: post
title: OPC UA 在变电站辅控系统中的应用
categories: [technology]
tags: [OPC UA]
---

<p>
最近，在第五届国际可再生能源和电力工程会议上，建设部国网上海市电力公司和复旦大学联合发表了一篇题为《Design and Implementation of the
Substation Intelligent Auxiliary Control System Based on OPC UA》的论文，介绍了国家电网如何在变电站的辅控系统中利用 OPC UA 实现设备的互联互通和数据的统一利用。
</p>

<p>
对于变电站来说，因为它一般都是架设在比较偏远的地方，所以传统的运维方式是依靠人力进行巡检定期，所以不能做到对变电站所有设备的实时监测，也不能实时掌握变电站设备和环境是否安全稳定。
</p>

<p>
通过利用变电站辅助控制系统，则可以对电气设备、环境、安防、消防等进行综合监控，无需人工排班巡检。告警信息及时发出，故障精准定位，帮助工作人员高效运维。变电站的辅控系统对变电站内各种电气设备进行监测、保护、控制，对变电站内环境包括温度、湿度、空调、新风机、漏水、SF6气体泄漏，对变电站设施进行安防保护，安放系统包括门禁、红外、照明、视频图像、火灾消防、防盗等。
</p>

<p>
但是，在辅助控制系统的建设过程中，电网公司也遇到这样一些问题：
</p>
<ul class="org-ul">
<li>由于辅助控制设备的厂家众多，接口不一，设备之间数据不兼容、通信协议不匹配，导致辅助控制设备之间间通信较为困难。</li>
<li>目前的通信协议缺少信息安全保障，无法做到隐私数据的安全利用。</li>
</ul>



<div id="org387cdb1" class="figure">
<p><div align="center"><?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="462px" height="501px" viewBox="-0.5 -0.5 462 501" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2023-02-13T10:23:59.084Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/20.8.10 Chrome/106.0.5249.199 Electron/21.3.5 Safari/537.36&quot; etag=&quot;lm7F9cgem3UB7G04uROo&quot; version=&quot;20.8.10&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;Page-1&quot; id=&quot;x3aBHcs5ZalOineYVWUV&quot;&gt;7VpLb+M2EP41PDYQ9aSOkq1k222BBYJ2t6dCsRhLXVk0ZDq2++s7I1EvSxvbcWwrwOYScjgckTPfPEiaGJPF9iEPl/EfIuIp0bVoS4wp0XVKmQX/kLIrKQ72kDDPk0gxNYTH5D+uiJqirpOIrzqMUohUJssucSayjM9khxbmudh02Z5F2v3qMpzzHuFxFqZ96tckknFJZbrT0D/xZB6rL1vMKAcWYcWrNrKKw0hsWiQjIMYkF0KWrcV2wlPUXaWWct79D0brdeU8k8dMEDndPnz7qv/68M/n32bTzw9//fnpF2WcldxV++URbF91RS5jMRdZmAYN1c/FOos4StWg1/D8LsQSiBSI/3Ipd8qW4VoKIMVykapRWHC++4bz76yq+3d7bLpVwsveTvWeRSaVUArq80GjS+w8p3zroamBVu4HN/FDNSnSSqzzGX9FNxXawnzO5St8em1McAIuFhzWDPNynoYyeemuI1RonNd8aiqsP9y1GJYiyeSqJfkLEoBBOZauKVgpt7Jox/rQKCVWvdbSGlKBkBPQYr8BLUNGGg2CboAW40y0tCx8ugGdnwY824DmLdzd0m/g7moTL2G6VtsigUXYPXEZCRzimsS3sOH5xHVJAN0J8TQS2ISZxL1HZqB7wGwQphFGccilOIpyDBQFDQ8mmg2Pbqegfv8ph9YcW4XAgHhOMYsR325Jhq9PCXOVHNcrKA5hUxIw4gXED9QQ62O/i+JNnEj+uAwLkGygmOkito08u0beC88l376OvT5WqhhuWR2jmo4y8qYpNOo6KG4VGUy7UHzQBy0Oaiw1DLVcqXPXRzs2dnGI76NpSjB496NTNTW7/mNYfVVTfUDV9qVUTc2xxOJeWQUhUCrp06dUzL5jGN4msozXuqW6dbyGdhOusVNF61aUdzphXjsQ5t8xrLMrVXHngeEtdfilE7N+kslORJFzPIpuAIabFml0hFVaBwlNyXYOFm5gVveWZmUDudXFTMrsIpMy4mqYZH0PK6uyvsJsCyXTpKhnIP96xKM9cNw8t7JubtXNgTJGu2puNcbiQdf2hKpaPOgK7KYRThvwBbNAPv0AgNf3DmN14XizYtIY0KdTFOflCUvH09ZHrNsNbWx1uzmgalYcOW2M56Bq1PAHVLVpj03VdPT3je9SFL9j+HePjP7n3mGdZVZ3wINsvM+B+A+uBJHKL4K/72DwhyGvuBrCBMHQicoEAcxj96ChQujKHqSPzoMoGfVRgh57DUy1YSxcqYIaupstbj7RQcrCiR2RdBDvyQzsGD7x9ItYJTIRGWpWSCkWoNqKwUuTOQ5IsedH9bMmWisKV3GNkpXMxff60ZS2kLXYzvGx+C7Molwk0d0yFhnX6ykTkYq8WB+kf/y7kLvunVsG8p014KxUu5i3DhwRe+6bRRX6M1BaW+e0a5iuy7714aSvvQPqqWinvYf0HjwMdy+W0j2tl56sZjWKPyjI2pNTOnpPzru9oQxku582PdOmtnZA0JuNCt3mFxkle/OzFiP4Hw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 114.5 455 L 114.5 465 L 55.03 465 L 55.01 379.5 L 44.51 379.5 L 60 360.5 L 75.51 379.5 L 65.01 379.5 L 65.03 455 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="1.42" pointer-events="all"/><path d="M 55.01 379.5 L 44.51 379.5 L 60 360.5 L 75.51 379.5 L 65.01 379.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="4" pointer-events="all"/><path d="M 225 419.5 L 215 419.5 L 215 379.5 L 204.5 379.5 L 220 360.5 L 235.5 379.5 L 225 379.5 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 325.5 465 L 325.5 455 L 375.03 455 L 375.01 379.5 L 364.51 379.5 L 380 360.5 L 395.51 379.5 L 385.01 379.5 L 385.03 465 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="1.42" pointer-events="all"/><path d="M 375.01 379.5 L 364.51 379.5 L 380 360.5 L 395.51 379.5 L 385.01 379.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="4" pointer-events="all"/><rect x="115" y="420" width="210" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 460px; margin-left: 116px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">变电站传感器、摄像头、<br />控制器等多种设备</div></div></div></foreignObject><text x="220" y="465" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle">变电站传感器、摄像头、&#xa;控制器等多种设备</text></switch></g><rect x="0" y="300" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 330px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">安全监控终端</div></div></div></foreignObject><text x="60" y="335" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle">安全监控终端</text></switch></g><path d="M 85 269.5 L 74.5 269.5 L 90 250.5 L 105.5 269.5 L 95 269.5 L 95 280.5 L 105.5 280.5 L 90 299.5 L 74.5 280.5 L 85 280.5 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 185 269.5 L 174.5 269.5 L 190 250.5 L 205.5 269.5 L 195 269.5 L 195 280.5 L 205.5 280.5 L 190 299.5 L 174.5 280.5 L 185 280.5 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 259.5 225 L 259.5 235.5 L 240.5 220 L 259.5 204.5 L 259.5 215 L 300.5 215 L 300.5 204.5 L 319.5 220 L 300.5 235.5 L 300.5 225 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="190" width="200" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 220px; margin-left: 41px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">集成应用服务</div></div></div></foreignObject><text x="140" y="225" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle">集成应用服务</text></switch></g><path d="M 135 149.5 L 124.5 149.5 L 140 130.5 L 155.5 149.5 L 145 149.5 L 145 170.5 L 155.5 170.5 L 140 189.5 L 124.5 170.5 L 135 170.5 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="80" y="70" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 100px; margin-left: 81px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">云服务</div></div></div></foreignObject><text x="140" y="105" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle">云服务</text></switch></g><rect x="160" y="300" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 330px; margin-left: 161px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">环境监控终端</div></div></div></foreignObject><text x="220" y="335" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle">环境监控终端</text></switch></g><rect x="320" y="300" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 330px; margin-left: 321px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">视频监控终端</div></div></div></foreignObject><text x="380" y="335" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle">视频监控终端</text></switch></g><path d="M 375 269.5 L 364.5 269.5 L 380 250.5 L 395.5 269.5 L 385 269.5 L 385 280.5 L 395.5 280.5 L 380 299.5 L 364.5 280.5 L 375 280.5 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="320" y="190" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 220px; margin-left: 321px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">智能巡检主机</div></div></div></foreignObject><text x="380" y="225" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle">智能巡检主机</text></switch></g><path d="M 320.5 45 L 320.5 34.5 L 339.5 50 L 320.5 65.5 L 320.5 55 L 275.03 55 L 275.03 105 L 219.5 105 L 219.5 115.5 L 200.5 100 L 219.5 84.5 L 219.5 95 L 265.03 95 L 265.03 45 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="1.42" pointer-events="all"/><path d="M 320.5 45 L 320.5 34.5 L 339.5 50 L 320.5 65.5 L 320.5 55" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="4" pointer-events="all"/><path d="M 219.5 105 L 219.5 115.5 L 200.5 100 L 219.5 84.5 L 219.5 95" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="4" pointer-events="all"/><path d="M 340 9.23 C 340 6.78 340.95 4.43 342.64 2.7 C 344.32 0.97 346.61 0 349 0 L 381 0 C 383.39 0 385.68 0.97 387.36 2.7 C 389.05 4.43 390 6.78 390 9.23 L 390 90.77 C 390 93.22 389.05 95.57 387.36 97.3 C 385.68 99.03 383.39 100 381 100 L 349 100 C 346.61 100 344.32 99.03 342.64 97.3 C 340.95 95.57 340 93.22 340 90.77 Z Z M 342 8.97 L 342 91.03 L 388.25 91.03 L 388.25 8.97 Z" fill="rgb(255, 255, 255)" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="356.75" cy="2.05" rx="0.75" ry="0.7692307692307692" fill="#ffffff" stroke="#000000" pointer-events="all"/><rect x="359" y="93.85" width="12" height="3.59" rx="1.54" ry="1.54" fill="#ffffff" stroke="#000000" pointer-events="all"/><rect x="359.25" y="1.79" width="11.25" height="1.28" rx="0.51" ry="0.51" fill="#ffffff" stroke="#000000" pointer-events="all"/><ellipse cx="372.5" cy="2.05" rx="0.75" ry="0.7692307692307692" fill="#ffffff" stroke="#000000" pointer-events="all"/><ellipse cx="375" cy="2.05" rx="0.75" ry="0.7692307692307692" fill="#ffffff" stroke="#000000" pointer-events="all"/><ellipse cx="381.25" cy="3.08" rx="1" ry="1.0256410256410255" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 107px; margin-left: 365px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">移动终端</div></div></div></foreignObject><text x="365" y="123" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle">移动终端</text></switch></g><path d="M 250 160 L 250 0" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 250 160 L 460 160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg></div>
</p>
</div>

<p>
针对这些问题，这篇论文的解决方案是在辅控系统从设备端到云端用 OPC UA 进行统一通信。变电站传感器、摄像头、控制器等设备作为 OPC UA Publisher 发布服务器，实时提供采集到的数据。安全监控终端、动态环境监控系统、视频监控系统作为 OPC UA Subscriber 订阅客户端，接收来自底层设备的数据，同时对上提供 OPC UA Server 服务，供集成应用服务器和智能巡检系统访问。集成应用服务器提供数据服务给云上的 OPC UA 客户端应用访问。远程控制命令可以通过移动终端向云服务器发送命令。
</p>

<p>
这对这个论文，我有一些疑惑：
</p>

<p>
第一，论文中提到集成应用服务器接受到命令后，由服务器上的 OPC UA 客户端应用查询命令，再下发指令到变电站设备。这里就可能会有一些延时，不知道为什么要这么设计。或许，直接通过 OPC UA 服务器应用中的的方法调用客户端接口发送命令，效果会更好一些。
</p>

<p>
第二，目前辅控系统中的那么多设备，是否都具有 OPC UA 通信能力？或许，这篇论文是选择了有 OPC UA 通信能力的设备联网，做了一个 PoC 验证测试。那么，OPC UA 在电网辅控系统中的应用，是否有前景？针对这个问题，我计划后续深入调研下，了解下这个领域的现状。
</p>
