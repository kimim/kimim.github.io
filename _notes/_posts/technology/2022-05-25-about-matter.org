#+BEGIN_EXPORT html
---
layout: post
title: 聊一聊 Matter 协议
categories: [technology]
tags: [IoT, industry]
---
#+END_EXPORT

在智能家居物联网领域，最近有一个项目叫 Matter 协议栈，之前的名字叫
CHIP，即 Connected Home IP（连接的家居网络协议）。CHIP 这个项目名用了
一段时间后，估计他们发现这个名字实在有些费解，因为在计算机领域 CHIP 主
要指的是芯片。所以，现在改成 Matter，依然是个名词，但是它表示一种到处
存在的东西。

这个 Matter 协议标准的运营组织是 CSA，即 Connectivity Standards
Alliance，连接标准联盟。CSA 的前身是 Zigbee 联盟。Zigbee 联盟创立之初
是为了建立一个以 Zigbee 通信协议为基础的无线家居自动化设备的物联网标准。
随着时间推移，智慧能源、清洁能源、家庭娱乐系统等相关企业也加入到联盟中，
所以就不能把通信协议仅限于 Zigbee 了。所以在 2021 年 5 月 11 日宣布，
改名为 CSA [fn:1]。同时，宣布 CHIP 项目改名为 Matter。

Matter 项目背后的推手有不少重量级成员如 Apple、Google、Amazon、Samsung、
NXP 等智慧家居平台企业和芯片公司。这意味着，未来很有可能符合 Matter 标
准的认证设备，都能无缝连接到 Apple HomePod、Google Home、Amazon Alexa
等智能音响。对于智能家居设备厂商来说，只要实现一个标准，就能打通任何智
能家居平台。除了能节省研发成本，还能获得更大的市场份额。实在是非常值得
期待的。


Matter 的开发目标和原则：
1. 统一通用：基于经过市场验证的可行技术，建立一个新标准。
2. 互联互通：在用户授权的情况下，实现任意 Matter 认证设备之间的通讯。
3. 安全保障：沿用先进主流的信息安全通信措施和协议。
3. 用户可控：最终用户掌控访问设备的权限。
4. 整体容错：不会因为某个系统中某个链条环节导致系统故障。
5. 稳定可靠：标准规定了设备使用过程需要的一整套协议，包括安装部署、运
   行工作、系统管理等。
6. 精简高效：协议栈可以裁减运行在资源受限的嵌入式 MCU 上。
7. 普遍适用：基于 IP，支持低端设备，可以广泛采用。
8. 灵活部署：协议可以灵活调整，适配不同的工作环境。
9. 简单易用：简单、高效、集成，容易上手使用。
10. 开放开源：协议标准开放开源提供，不仅限于成员企业。


我们再看看 Matter 项目的架构设计。Matter 的开发目标是一个简单、统一的
应用层连接标准。目的是让开发者能够建立一个可靠、安全的物联网生态系统，
确保智慧家居和楼宇设备的互联互通兼容性。协议以 IP 为基础，兼容 Thread
和 WiFi。

Matter 通信层架构如下：

#+BEGIN_EXPORT html
<div align="center">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="561px" height="241px" viewBox="-0.5 -0.5 561 241" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2022-05-25T11:27:53.565Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/18.0.6 Chrome/100.0.4896.143 Electron/18.2.3 Safari/537.36&quot; etag=&quot;h8yIn4tf2BuMjQjysx3f&quot; version=&quot;18.0.6&quot; type=&quot;device&quot; pages=&quot;2&quot;&gt;&lt;diagram id=&quot;39v41MHP21HMX9VKEkff&quot; name=&quot;Communication&quot;&gt;zdjdbpswGAbgq+FwlbGBsNMSuqZqtEpkS0/d8C1GApy6ppBd/cwwIdSqtFVK7aPA6x/gsQMGjyRV903QA1vzHEoPo7zzyNLDGKMIq58+OQ6Jj0k4JHtR5Dqbgqz4DTpEOm2KHF5mFSXnpSwO83DH6xp2cpZRIXg7r/aLl/OjHugejCDb0dJMt0Uu2ZDGeDHlt1DsmT5yGJOhoKJjXX0hL4zmvD2LSOqRRHAuh62qS6Ds8UaWod3NO6Wn8xJQy39pkG4Xj228flrdNj85fe7Q3eb4JRp6eaVlo693TaUEoU9ZHkcGwZs6h74r5JHrlhUSsgPd9aWtGnmVMVmVas9Xm7pTEBK6d8/WPxmoyQO8AimOqsrYINJsp3mj99tpEMKxDjsbgDGjetz3p64nG7Whef6DamFQbZIH95xi0wnHn+kUG04/lvadgsA1p6+G0+rhNbIO9XZC4cD2H298EpxJLbN756AIMqE+dUL5vun0PclWmXUqHLhGhQ2qvllTUvtPPoJdwyIGVioZiBqkdawAuYYVGFjb4qawDxW7BhUaUBsmgObWqcIP3tjJxajMVXqM8JUfXgXuYRHbWOY6fVhXqVc/dXNH1/epdbTog8/Dy6GZi3YnnS43udTu9Cr+t+zsgwZJ/wA=&lt;/diagram&gt;&lt;diagram id=&quot;blqg3zwlRoOX25T0yOIX&quot; name=&quot;Stack&quot;&gt;zZbPj5wgFID/Go+bjDK/epzOzrQ9bNLWNj2/4hslVSD4XMf+9cUFxjF20/bQ6MXA9x4IHwhG7Fhd3xnQxZPKsIySVXaN2GOUJLv9zj570DkQr1jsSG5E5tkAUvETQ6KnjciwHiWSUiUJPYZcSYmcRgyMUe047aLK8Vs15DgBKYdySr+JjApH98lu4O9R5IV/82bPXKCCkOsnUheQqfYOsVPEjkYpcqXqesSydxe0uHbnV6K3cRmU9DcN3ogL/55fnrED/QCf4h9fz8WD7+UZysbP96B1KTiQUNKPm7rgwqhGZtj3t4rY27YQhKkG3kdbu/qWFVSVthbbou8ZDeH11SHHNxF2A6GqkExnU0KDrXfXBeuu2g4LsQkpxd0iBAZ+7fNbz4MfW/CK/kFXMtH1CASWhH2fkmk4NQYX5y5ezy1vPZH3QRIa4G6v3RweXkC9OIPJam6D8VThIdg7G6iEzJdnbTu7tc3EWoq8MYLsEA82cJLcdNp7jJItVL0W9+y/aZHLJZplyexmtxOzT1jX/Y16tyF/o/SzamiRSme/YeLd9JT8+AebXwzIWitD/SEK0uqv+vkvTe76P95Atjr8Sb3E7n5H2ekX&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="0" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 30px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Matter</div></div></div></foreignObject><text x="280" y="34" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Matter</text></switch></g><rect x="0" y="60" width="280" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 90px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">TCP</div></div></div></foreignObject><text x="140" y="94" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">TCP</text></switch></g><rect x="280" y="60" width="280" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 90px; margin-left: 281px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">UDP</div></div></div></foreignObject><text x="420" y="94" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">UDP</text></switch></g><rect x="0" y="120" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 150px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">IPv6</div></div></div></foreignObject><text x="280" y="154" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">IPv6</text></switch></g><rect x="0" y="180" width="80" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 210px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">DSL</div></div></div></foreignObject><text x="40" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">DSL</text></switch></g><rect x="80" y="180" width="80" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 210px; margin-left: 81px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">DOCSIS</div></div></div></foreignObject><text x="120" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">DOCSIS</text></switch></g><rect x="160" y="180" width="80" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 210px; margin-left: 161px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Cellular</div></div></div></foreignObject><text x="200" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Cellular</text></switch></g><rect x="240" y="180" width="80" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 210px; margin-left: 241px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Ethernet</div></div></div></foreignObject><text x="280" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Ethernet</text></switch></g><rect x="320" y="180" width="80" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 210px; margin-left: 321px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">WiFi</div></div></div></foreignObject><text x="360" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">WiFi</text></switch></g><rect x="400" y="180" width="80" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 195px; margin-left: 401px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Thread</div></div></div></foreignObject><text x="440" y="199" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Thread</text></switch></g><rect x="400" y="210" width="80" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 225px; margin-left: 401px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">802.15.4</div></div></div></foreignObject><text x="440" y="229" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">802.15.4</text></switch></g><rect x="480" y="180" width="80" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 195px; margin-left: 481px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">IPv6 for BLE</div></div></div></foreignObject><text x="520" y="199" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">IPv6 for BLE</text></switch></g><rect x="480" y="210" width="80" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 225px; margin-left: 481px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">BLE</div></div></div></foreignObject><text x="520" y="229" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">BLE</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>
</div>
#+END_EXPORT

Matter 应用层部署在支持 IPv6 的设备和控制器上。Matter 的核心通信采用
WiFi 和 Thread。设备设置过程使用低功耗蓝牙。


Matter 应用架构如下：

#+BEGIN_EXPORT html
<div align="center">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="561px" height="421px" viewBox="-0.5 -0.5 561 421" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2022-05-25T11:48:56.177Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/18.0.6 Chrome/100.0.4896.143 Electron/18.2.3 Safari/537.36&quot; etag=&quot;DyBx10NoecE2ZIAGQJNZ&quot; version=&quot;18.0.6&quot; type=&quot;device&quot; pages=&quot;2&quot;&gt;&lt;diagram id=&quot;39v41MHP21HMX9VKEkff&quot; name=&quot;Communication&quot;&gt;zdjdbpswGAbgq+FwlbGBsNMSuqZqtEpkS0/d8C1GApy6ppBd/cwwIdSqtFVK7aPA6x/gsQMGjyRV903QA1vzHEoPo7zzyNLDGKMIq58+OQ6Jj0k4JHtR5Dqbgqz4DTpEOm2KHF5mFSXnpSwO83DH6xp2cpZRIXg7r/aLl/OjHugejCDb0dJMt0Uu2ZDGeDHlt1DsmT5yGJOhoKJjXX0hL4zmvD2LSOqRRHAuh62qS6Ds8UaWod3NO6Wn8xJQy39pkG4Xj228flrdNj85fe7Q3eb4JRp6eaVlo693TaUEoU9ZHkcGwZs6h74r5JHrlhUSsgPd9aWtGnmVMVmVas9Xm7pTEBK6d8/WPxmoyQO8AimOqsrYINJsp3mj99tpEMKxDjsbgDGjetz3p64nG7Whef6DamFQbZIH95xi0wnHn+kUG04/lvadgsA1p6+G0+rhNbIO9XZC4cD2H298EpxJLbN756AIMqE+dUL5vun0PclWmXUqHLhGhQ2qvllTUvtPPoJdwyIGVioZiBqkdawAuYYVGFjb4qawDxW7BhUaUBsmgObWqcIP3tjJxajMVXqM8JUfXgXuYRHbWOY6fVhXqVc/dXNH1/epdbTog8/Dy6GZi3YnnS43udTu9Cr+t+zsgwZJ/wA=&lt;/diagram&gt;&lt;diagram id=&quot;blqg3zwlRoOX25T0yOIX&quot; name=&quot;Stack&quot;&gt;zZZBb5swFIB/DcdKYCe0O2Zpsu1QqRuddn4zL2ANbGQeJezX19QmBLGq22GCC9jfezb2Z4MJ+L48fzJQ5Q86xSJgYXoO+H3AGAtjZm896RyJGN86khmZejaCRP5GD0NPG5liPUkkrQuS1RQKrRQKmjAwRrfTtJMupk+tIMMZSAQUc/pDppQ7esduR/4ZZZb7J2/vuAuUMOT6idQ5pLq9QvwQ8L3RmlypPO+x6OUNWly74xvRy7gMKvqbBh/kSfzMTs/YQXUDX6Nf34/5je/lGYrGz3dXVYUUQFIrP27qBhdGNyrFvr8w4B/bXBImFYg+2trltyynsrC1yBZ9z2gIz28OObqIsDsIdYlkOpsyNIi9u26w7qrtuBDbISW/WoSBgV/77NLz6McWvKJ/0MVmuu6BwJJh4ydkGkGNwdW5izZLy9vM5H1RhAaE22sXh7tXUK/OIAuXNhjNFe4Ge0cDpVTZ+qzFi1vbzqwlKBojyQ5xZwMHJUxXeY8Bi6Hstbhr/07LTK3RLGeLm41nZh+wrvsT9WpD/kHpN93QKpUufsJEt/Ov5OM7Np8MqLrShvqPKCirv+znvza5m/94Atnq+Cf1Grv6H+WHFw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="0" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 30px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Application</div></div></div></foreignObject><text x="280" y="34" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Application</text></switch></g><rect x="0" y="60" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 90px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Data Model Structure</div></div></div></foreignObject><text x="280" y="94" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Data Model Structure</text></switch></g><rect x="0" y="120" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 150px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Interaction Model Actions</div></div></div></foreignObject><text x="280" y="154" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Interaction Model Actions</text></switch></g><rect x="0" y="180" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 210px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Action Framing</div></div></div></foreignObject><text x="280" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Action Framing</text></switch></g><rect x="0" y="240" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 270px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Security: Encryption &amp; Signing</div></div></div></foreignObject><text x="280" y="274" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Security: Encryption &amp; Signing</text></switch></g><rect x="0" y="300" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 330px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Message Framing &amp; Routing</div></div></div></foreignObject><text x="280" y="334" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Message Framing &amp; Routing</text></switch></g><rect x="0" y="360" width="560" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 558px; height: 1px; padding-top: 390px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">IP Framing &amp; Transport Management</div></div></div></foreignObject><text x="280" y="394" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">IP Framing &amp; Transport Management</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>
</div>
#+END_EXPORT

Matter 应用层架构分为 7 个模块：
1. 应用服务层：提供设备的高级业务逻辑服务。比如一个灯光控制开关，可以
   调节灯的开关、亮度以及颜色。
2. 数据模型层：通过数据元语描述设备功能。应用服务层通过调用设备描述结
   构与设备通信。
3. 操作模型层：提供一组访问设备的操作动作。比如读写设备的某个属性，代
   表某一类设备操作。操作动作在数据模型层定义。
4. 动作组帧层：一旦通过操作模型层发起一个动作，就会在这一层组装层二进
   制格式的数据包传输给设备。
5. 信息安全层：这一层对数据进行加密、签名。从而保证收发双方数据传输完整保密。
6. 消息路由层：把加密、签名的数据分帧打包，添加消息头和路由信息。
7. 网络传输层：通过传输层传输 IP 数据包。

* Footnotes

[fn:1] https://csa-iot.org/newsroom/connectivity-standards-alliance/
